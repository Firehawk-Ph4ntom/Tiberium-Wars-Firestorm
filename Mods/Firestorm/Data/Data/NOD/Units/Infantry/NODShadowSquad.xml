<AssetDeclaration xmlns="uri:ea.com:eala:asset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xi="http://www.w3.org/2001/XInclude">
	<Includes>
		<!-- Base Object -->
		<Include type="all" source="DATA:GlobalData\GlobalDefines.xml"/>
		<Include type="instance" source="DATA:Firestorm\Data\Data\Misc\BaseObjects\BaseSquad.xml"/>
	</Includes>
	<GameObject id="NODShadowSquad" inheritFrom="BaseSquad" SelectPortrait="Portrait_NODShadow" ButtonImage="Portrait_NODShadow" Side="NOD" BuildCost="800" BuildTime="8" CommandSet="NODShadowSquadCommandSet" KindOf="SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND INFILTRATOR PATH_THROUGH_INFANTRY STEALTH_GARRISON SNIPER SKIRMISH_AI_DONT_GARRISON CAN_CAPTURE CAN_BE_FAVORITE_UNIT SCORE" WeaponCategory="GUN" EditorName="NODShadowSquad" Description="Desc:NODShadow" ThreatLevel="10" TypeDescription="Type:NODShadow" UnitTypeIcon="ShadowIcon">
		<DisplayName xmlns:xai="uri:ea.com:eala:asset:instance" xai:joinAction="Replace">Name:NODShadow</DisplayName>
		<DisplayUpgrade>Upgrade_PurifyingLaser</DisplayUpgrade>
		<DisplayUpgrade>Upgrade_CyberneticAugmentation</DisplayUpgrade>
		<GameDependency>
			<RequiredObject>NODSecretShrine</RequiredObject>
		</GameDependency>
		<ArmorSet Armor="NoArmor"/>
		<LocomotorSet Locomotor="NormalRangedSquadLocomotor" Condition="NORMAL" Speed="90"/>
		<LocomotorSet Locomotor="FlyingShadowSquadLocomotor" Condition="NORMAL_UPGRADED" Speed="120.0"/>
		<SkirmishAIInformation UnitBuilderStandardCombatUnit="true"/>
		<Draws>
			<ScriptedModelDraw id="ModuleTag_Draw" OkToChangeModelColor="true" DependencySharedModelFlags="EMOTION_TAUNTING EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY">
				<ModelConditionState ParseCondStateType="PARSE_DEFAULT">
					<Model Name=""/>
				</ModelConditionState>
				<ModelConditionState ParseCondStateType="PARSE_NORMAL" ConditionsYes="FORMATION_PREVIEW">
					<Model Name="FXShadow_FP"/>
				</ModelConditionState>
				<ModelConditionState ParseCondStateType="PARSE_NORMAL" ConditionsYes="USER_1 USER_2">
					<Model Name=""/>
					<ParticleSysBone BoneName="NONE" FXParticleSystemTemplate="NODTibInfusionBlue" FollowBone="true"/>
				</ModelConditionState>
				<ModelConditionState ParseCondStateType="PARSE_NORMAL" ConditionsYes="USER_1">
					<Model Name=""/>
					<ParticleSysBone BoneName="NONE" FXParticleSystemTemplate="NODTibInfusion" FollowBone="true"/>
				</ModelConditionState>
				<ModelConditionState ParseCondStateType="PARSE_NORMAL" ConditionsYes="WORLD_BUILDER">
					<Model Name="NUSHADOWSQUADMARKER"/>
				</ModelConditionState>
			</ScriptedModelDraw>
		</Draws>
		<Behaviors>
			<WeaponSetUpdate id="ModuleTag_WeaponSetUpdate">
				<WeaponSlotHardpoint ID="1" AllowInterleavedFiring="false" InterleavedStyle="INTERLEAVE_FIRST_AVAILABLE" WeaponChoiceCriteria="PREFER_MOST_DAMAGE">
					<Weapon Ordering="PRIMARY_WEAPON" Template="ShadowMachineGunRangefinder"/>
				</WeaponSlotHardpoint>
			</WeaponSetUpdate>
			<HordeContain id="ModuleTag_HordeContain" FrontAngle="4.7123" FlankedDelaySeconds="2.0" ShowPips="false" Formation="MAIN" MeleeAttackLeashDistance="1" Slots="4" ObjectStatusOfContained="" ForbiddenCoverStatus="AIRBORNE_TARGET" ConditionForEntry="INVALID" UseSlowHordeMovement="false">
				<PassengerFilter Rule="NONE" Include="INFANTRY"/>
				<DieMuxData/>
				<InitialPayload Name="NODShadow" Count="4"/>
				<MeleeBehavior Type="AMOEBA"/>
				<RankInfo RankID="1" UnitType="NODShadow">
					<Position X="10" Y="-10"/>
					<Position X="10" Y="10"/>
				</RankInfo>
				<RankInfo RankID="2" UnitType="NODShadow">
					<Position X="-10" Y="-10"/>
					<Position X="-10" Y="10"/>
				</RankInfo>
				<RankToReleaseWhenAttacking>1</RankToReleaseWhenAttacking>
				<RankToReleaseWhenAttacking>2</RankToReleaseWhenAttacking>
			</HordeContain>
			<SuppressionUpdate id="ModuleTag_SuppressionUpdate" UpdateDelay="1s" Suppressability="500" SuppressionDuration="5s" AttributeModifierSuppressed="Modifier_Test_Suppression" AttributeModifierForceMove="Modifier_Test_Suppression_ForceMove" IgnoreSuppressionObjectStatus="AIRBORNE_TARGET"/>
			<GrantUpgradeCreate id="ModuleTag_GrantUpgradeCreate" UpgradeToGrant="Upgrade_GliderLand"/>
			<GiveOrRestoreUpgradeSpecialPower id="SpecialPower_GliderLandUpdate" SpecialPowerTemplate="SpecialPower_GliderLand" UpgradeToGive="Upgrade_GliderLand"/>
			<RemoveUpgradeUpgrade id="ModuleTag_RemoveGliderLandUpgrade">
				<UpgradeToRemove>Upgrade_GliderLand</UpgradeToRemove>
				<TriggeredBy>Upgrade_GliderLiftOff</TriggeredBy>
			</RemoveUpgradeUpgrade>
			<GiveOrRestoreUpgradeSpecialPower id="SpecialPower_GliderLiftOffUpdate" SpecialPowerTemplate="SpecialPower_GliderLiftOff" UpgradeToGive="Upgrade_GliderLiftOff"/>
			<RemoveUpgradeUpgrade id="ModuleTag_RemoveGliderLiftOffUpgrade">
				<UpgradeToRemove>Upgrade_GliderLiftOff</UpgradeToRemove>
				<TriggeredBy>Upgrade_GliderLand</TriggeredBy>
			</RemoveUpgradeUpgrade>
			<StealthDetectorUpdate id="ModuleTag_StealthDetect" DetectionRange="200" ExtraForbiddenKindOf="AIRCRAFT MINE" InitiallyDisabled="true">
				<TriggeredBy>Upgrade_GliderLand</TriggeredBy>
			</StealthDetectorUpdate>
			<StealthDetectorUpdate id="ModuleTag_StealthDetect2" DetectionRange="200" ExtraForbiddenKindOf="MINE" InitiallyDisabled="true">
				<TriggeredBy>Upgrade_GliderLiftOff</TriggeredBy>
			</StealthDetectorUpdate>
			<xi:include href="DATA:Firestorm/Data/Data/Misc/Includes/NODTiberiumInfusionUpgradeSquad.xml" xpointer="xmlns(n=uri:ea.com:eala:asset) xpointer(/n:Behaviors/child::*)"/>
			<StatusBitsUpgrade id="ModuleTag_DummyUpgradeForWB" StatusToSet="WEAPON_UPGRADED_01">
				<TriggeredBy>Upgrade_PurifyingLaser</TriggeredBy>
			</StatusBitsUpgrade>
			<AttributeModifierUpgrade id="ModuleTag_CyberneticAugmentAttribute" AttributeModifier="AttributeModifier_CyberneticAugmentation">
				<TriggeredBy>Upgrade_CyberneticAugmentation</TriggeredBy>
			</AttributeModifierUpgrade>
			<ModelConditionUpgrade id="ModuleTag_DummyUpgradeForWB2" AddConditionFlags="USER_30">
				<TriggeredBy>Upgrade_CyberneticAugmentation</TriggeredBy>
			</ModelConditionUpgrade>
			<SpecialPowerDispatchSpecialPower id="ModuleTag_GliderLiftOffDispatch" SpecialPowerTemplate="SpecialPower_GliderLiftOffDispatch" RequireAllPowersToFunction="true">
				<SpecialPower SpecialPowerTemplate="SpecialPower_GliderLiftOffTrigger"/>
				<SpecialPower SpecialPowerTemplate="SpecialPower_GliderLiftOff"/>
			</SpecialPowerDispatchSpecialPower>
			<SpecialPower id="ModuleTag_LiftOffSP" SpecialPowerTemplate="SpecialPower_GliderLiftOffTrigger" UpdateModuleStartsAttack="true"/>
			<SwitchLocomotorsSpecialAbilityUpdate id="ModuleTag_LiftOffSPUpdate" SpecialPowerTemplate="SpecialPower_GliderLiftOffTrigger" UnpackTime="0.57s" BusyForDuration="1s" UseUpgradedLocomotor="true" TriggersFlight="true" Options="IGNORE_FACING_CHECK" SetObjectStatusOnTrigger="NO_ATTACK NO_AUTO_ACQUIRE"/>
			<HordeDispatchSpecialPower id="ModuleTag_HordeDispatchSpecialPowerGliderLiftOff" SpecialPowerTemplate="SpecialPower_GliderLiftOff"/>
			<SpecialPowerDispatchSpecialPower id="ModuleTag_GliderLandDispatch" SpecialPowerTemplate="SpecialPower_GliderLandDispatch" RequireAllPowersToFunction="true">
				<SpecialPower SpecialPowerTemplate="SpecialPower_GliderLandTrigger"/>
				<SpecialPower SpecialPowerTemplate="SpecialPower_GliderLand"/>
			</SpecialPowerDispatchSpecialPower>
			<SpecialPower id="ModuleTag_LandSP" SpecialPowerTemplate="SpecialPower_GliderLandTrigger" UpdateModuleStartsAttack="true"/>
			<SwitchLocomotorsSpecialAbilityUpdate id="ModuleTag_LandSPUpdate" SpecialPowerTemplate="SpecialPower_GliderLandTrigger" HordeMembersSpecialPowerTemplate="SpecialPower_GliderLand" UnpackTime="0s" PackTime="2.0s" BusyForDuration="2.0s" StartAbilityRange="15.0" LandingRange="320" UseUpgradedLocomotor="false" TriggersLanding="true" Options="MUST_FINISH_ABILITY APPROACH_UNTIL_MEMBERS_IN_RANGE" ClearObjectStatusOnExit="NO_ATTACK NO_AUTO_ACQUIRE"/>
			<HordeDispatchSpecialPower id="ModuleTag_HordeDispatchSpecialPowerGliderLand" SpecialPowerTemplate="SpecialPower_GliderLand"/>
			<!-- Explosive Charges -->
			<StatusBitsUpgrade id="ModuleTag_StatusBitUpgrade">
				<TriggeredBy>Upgrade_ShadowExplosiveCharges</TriggeredBy>
			</StatusBitsUpgrade>
			<SpecialPower id="ModuleTag_ExplosiveCharges" SpecialPowerTemplate="SpecialPower_PlaceSatchelCharge_NOD" UpdateModuleStartsAttack="true"/>
			<WeaponFireSpecialAbilityUpdate id="ModuleTag_ExplosiveChargesUpdate" SpecialPowerTemplate="SpecialPower_PlaceSatchelCharge_NOD" SpecialWeapon="NODShadowPlaceExplosiveCharge" UnpackTime="0s" PackTime="0s" StartAbilityRange="15.0" BusyForDuration="0.1s" WhichSpecialWeapon="1" FleeRangeAfterCompletion="75.0" StartRechargeOnExit="true" Options="FLIP_OWNER_AFTER_PACKING USE_OBJECT_GEOMETRY_FOR_WITHIN_RANGE_CHECK IGNORE_FACING_CHECK CHECK_SPECIALPOWER_REQUIREMENTS_DURING_UPDATE CHECK_PREVENT_CONDITIONS"/>
			<!-- End Explosive Charges -->
			<AISpecialPowerUpdate id="ModuleTag_NODShadowLand" CommandButtonName="Command_NodShadow_GliderLand" SpecialPowerAIType="SPECIAL_POWER_MOVEMENT" MinimumCutoff="0"/>
			<AISpecialPowerUpdate id="ModuleTag_NODShadowExplosive" CommandButtonName="Command_NodShadow_PlaceExplosiveCharges" SpecialPowerAIType="SPECIAL_POWER_CAPTURE_BUILDING"/>
			<xi:include href="DATA:Includes/CaptureBehavior.xml" xpointer="xmlns(n=uri:ea.com:eala:asset) xpointer(/n:Behaviors/child::*)"/>
			<SpecialPower id="ModuleTag_NodShadowBeaconGetInRange" SpecialPowerTemplate="ShadowSquadBeaconGetInRange" UpdateModuleStartsAttack="true"/>
			<SpecialAbilityUpdate id="ModuleTag_NodShadowBeaconGetInRangeUpdate" SpecialPowerTemplate="ShadowSquadBeaconGetInRange" StartAbilityRange="0.1" ChainedButton="Command_NODShadowSquadDeployBeacon" FaceTarget="true"/>
			<HordeDispatchSpecialPower id="ModuleTag_DeployBeacon" SpecialPowerTemplate="SpecialPowerDeployBeacon"/>
			<AISpecialPowerUpdate id="ModuleTag_DeployBeaconAI" CommandButtonName="Command_NODShadowSquadBeaconGetInRange" SpecialPowerAIType="SPECIAL_POWER_REINFORCEMENT" SpecialPowerRadius="300" ReinforceDistance="400"/>
		</Behaviors>
		<AI>
			<HordeAIUpdate id="ModuleTag_AI" AutoAcquireEnemiesWhenIdle="YES ATTACK_BUILDINGS" MaxCowerTime="5.0s" MinCowerTime="3.0s" CanAttackWhileContained="true">
				<UnitAITargetChooserData SympathyRange="100.0"/>
			</HordeAIUpdate>
		</AI>
		<Body>
			<ImmortalBody id="ModuleTag_Body" MaxHealth="1.0"/>
		</Body>
		<Geometry>
			<Shape Type="BOX" MajorRadius="20.0" MinorRadius="20.0" Height="13.0"/>
		</Geometry>
		<VisionInfo VisionRange="350" ShroudClearingRange="400" MaxVisionBonusPercent="300" VisionBonusTestRadius="200" VisionBonusPercentPerFoot="1"/>
		<CrusherInfo CrusherLevel="0" CrushableLevel="0" UseCrushAttack="false"/>
	</GameObject>
</AssetDeclaration>